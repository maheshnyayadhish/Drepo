---
- name: Demo http playbook 2
  hosts: all
  become: true
  remote_user: toweruser1
  tasks:
  - name: login into cluster
    command: oc login -u toweruser1 -p toweruser1
  - name: create a project
    command: oc new-project towerdemo2
  - name: create a project
    command: oc new-app --docker-image=docker.io/lolhens/httpd --name=httpdemo -n towerdemo2
  - name: set volume to app
    command: oc set volumes dc/httpdemo --add -t pvc --name=httpdemo-volume-1 --claim-size=2Gi --claim-name=http-pvc --claim-class=storage-class-solidfire --claim-mode=RWO --overwrite  
  - name: Expose its route
    command: oc expose svc/httpdemo -n towerdemo2    
